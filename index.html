<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Aging Portraits ∞ 2055</title>

<link rel="manifest" href="data:application/manifest+json,{
  \"name\": \"Aging Portraits ∞ 2055\",
  \"short_name\": \"∞2055\",
  \"start_url\": \".\",
  \"display\": \"standalone\",
  \"background_color\": \"#ffffff\",
  \"theme_color\": \"#ff0000\",
  \"icons\": [{ \"src\": \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1 1'%3E%3C/svg%3E\", \"sizes\": \"1x1\", \"type\": \"image/svg+xml\" }]
}">
<meta name="theme-color" content="#ff0000">

<style>
  :root { --accent:#ff0000; transition:var(--accent) .92s cubic-bezier(.22,1,.36,1); }
  * { margin:0; padding:0; box-sizing:border-box; }
  html { -webkit-font-smoothing:subpixel-antialiased; }
  html,body { height:100%; background:#fff; overflow:hidden; font-family:Consolas,"Courier New",monospace; color:var(--accent); }
  body { display:grid; grid-template-rows:auto 1fr auto; position:relative; }

  header { display:flex; flex-direction:column; gap:18px; padding:20px 30px 10px; z-index:20; pointer-events:none; }
  .header-top { display:flex; justify-content:space-between; align-items:flex-start; width:100%; }
  .header-bottom { display:flex; justify-content:space-between; align-items:flex-end; width:100%; border:solid 1px var(--accent); padding:8px 14px;
    pointer-events:all; cursor:text; transition:all .6s cubic-bezier(.22,1,.36,1); }
  .title { background:var(--accent); color:#fff; padding:8px 14px; letter-spacing:1px;
    pointer-events:all; cursor:pointer; transition:all .6s cubic-bezier(.22,1,.36,1); }
  .title span { font-size:12.5px; opacity:.89; letter-spacing:1.8px; line-height:1.35; margin-top:6px; display:block; }

  /* TIMELAPSE PROMPT */
  .timelapse-prompt {
    color:#ffffff; font-size:11px; letter-spacing:2px; opacity:.6;
    pointer-events:all; cursor:pointer; animation:blink 2.5s infinite;
    background:var(--accent); padding:2px 6px; align-self:flex-end;
    transition:all .38s cubic-bezier(.22,1,.36,1);
  }
  .timelapse-prompt:hover, .timelapse-prompt:active { opacity:1; transform:translateX(4px); }
  .timelapse-prompt:active { transform:translateX(8px) scale(1.08); }

  /* TIMELAPSE OVERLAY — EXACTLY 2× DEFAULT SIZE, NO FULLSCREEN */
  #timelapse-overlay {
    position:fixed; inset:0; background:rgba(0,0,0,0.96);
    display:grid; place-items:center; opacity:0; pointer-events:none;
    transition:opacity .62s cubic-bezier(.22,1,.36,1); z-index:100;
  }
  #timelapse-overlay.visible { opacity:1; pointer-events:all; }

  #timelapse-container {
    position:relative;
    width:160vmin;
    height:90vmin;              
    box-shadow:0 20px 60px rgba(0,0,0,0.8);
  }
  #timelapse-container iframe {
    width:100%; height:100%; border:none; background:#000;
  }
  #timelapse-close {
    position:absolute; top:-64px; left:50%; transform:translateX(-50%);
    color:#fff; font-size:13px; letter-spacing:2px; cursor:pointer; opacity:.7;
    transition:opacity .3s;
  }
  #timelapse-close:hover { opacity:1; }

  /* Mobile: slightly smaller 2× to avoid feeling cramped */
  @media (max-width:840px) {
    #timelapse-container {
      width:92vw;
      height:51.75vw;     /* maintains 16:9 */
      max-height:82vh;
    }
  }

  /* PORTRAIT FRAME */
  #frame {
    width:100%; height:100%; border:none; background:#fff; opacity:0;
    transition:opacity .68s cubic-bezier(.22,1,.36,1); z-index:1;
  }

  /* BENEDICTION — DESKTOP */
  footer { position:absolute; bottom:20px; left:56px; max-width:540px; pointer-events:none; z-index:20; }
  .benediction {
    font-size:12px; line-height:1.32; letter-spacing:.6px; opacity:.98; user-select:none;
    color:var(--accent); -webkit-text-stroke:1.4px #fff; text-stroke:1.4px #fff; paint-order:stroke fill;
  }

  /* MOBILE LAYOUT */
  @media (max-width:840px) {
    html,body { height:auto; min-height:100vh; overflow-y:auto; overflow-x:hidden; }
    body { grid-template-rows:auto 1fr auto; }

    header { padding:16px 20px 10px; gap:14px; }
    .header-top { flex-direction:column; gap:12px; align-items:flex-start; }
    .header-bottom { flex-direction:column; align-items:flex-end; gap:8px; }
    .collection-link, .asset-link, .timelapse-prompt, .prompt { align-self:flex-end; }
    .info { font-size:12.5px; align-self:flex-end; }

    #frame { height:auto; min-height:60vh; max-height:70vh; }

    footer {
      position:static;
      padding:40px 20px 100px;
      background:#fff;
      pointer-events:all;
      z-index:20;
    }
    .benediction {
      font-size:14.2px; line-height:1.42; max-width:92%; margin:0 auto;
    }
  }

  @media (min-width:841px) {
    footer { bottom:11vh; left:5.8vw; max-width:520px; }
    .benediction { font-size:13.8px; line-height:1.36; }
  }

  /* SHARED STYLES */
  .collection-link, .asset-link {
    background:var(--accent); color:#fff; padding:8px 14px; letter-spacing:1px;
    pointer-events:all; cursor:pointer;
    transition:background .38s cubic-bezier(.22,1,.36,1), transform .38s cubic-bezier(.22,1,.36,1);
  }
  .collection-link a, .asset-link a { color:#fff; text-decoration:none; }
  .collection-link:hover, .asset-link:hover {
    background:color-mix(in srgb,var(--accent) 80%,black); transform:translateY(-2px);
  }
  .info { font-size:13px; letter-spacing:1.5px; opacity:.94; pointer-events:none; }
  .prompt { color:#fff; font-size:11px; letter-spacing:2px; opacity:.6; pointer-events:all; cursor:pointer;
    animation:blink 2.5s infinite; background:var(--accent); }
  @keyframes blink { 50%{opacity:.15} }
  .prompt:hover, .prompt:active { opacity:1; transform:translateX(4px); }
  .prompt:active { transform:translateX(8px) scale(1.08); }
  .loading-text {
    position:absolute; inset:0; display:grid; place-items:center;
    font-size:13px; letter-spacing:2px; pointer-events:none;
    animation:blink 1.8s infinite; z-index:30;
    color:var(--accent); -webkit-text-stroke:1.4px #fff; text-stroke:1.4px #fff; paint-order:stroke fill;
  }
</style>
</head>
<body>

<header>
  <div class="header-top">
    <div class="title">AGING PORTRAITS<br><span>30-YEAR REAL-TIME AGING STUDY • 2025-10-16 → 2055-10-16<br>POST-2055: DAILY CYCLE (EVEN = AGED • ODD = ORIGINAL)</span></div>
    <div class="collection-link"><a href="https://bazar.arweave.net/#/collection/HyzzmvsZifq3FiRjSNX6Rt0OamINcdfNbO5tvEjWDf0" target="_blank">View collection</a></div>
    <div class="asset-link"><a id="assetHref" href="#" target="_blank">View asset</a></div>
  </div>
  <div class="header-bottom">
    <div class="prompt"><strong>NEXT →</strong></div>
    <div class="timelapse-prompt"><strong>WATCH TIMELAPSE</strong></div>
    <div class="info" id="info"></div>
  </div>
</header>

<div class="loading-text" id="loadingText"><strong>Loading portrait …</strong></div>
<iframe id="frame" src="" allowfullscreen sandbox="allow-scripts allow-same-origin"></iframe>

<!-- TIMELAPSE OVERLAY — 2× DEFAULT SIZE -->
<div id="timelapse-overlay">
  <div id="timelapse-container">
    <div id="timelapse-close">× CLOSE</div>
    <iframe src="" allow="autoplay; encrypted-media" allowfullscreen></iframe>
  </div>
</div>

<footer>
  <div class="benediction">
    <strong>Mind is living; mechanism is law.<br>
    Machines extend the reach of mind but not its life.<br>
    Their power and precision await the guidance of personality and the direction of spirit.<br><br>
    When mind forgets spirit, civilization hardens into mechanism;<br>
    when spirit illumines mind, civilization ascends toward beauty.<br><br>
    Art is the bridge between them—<br>
    the aesthetic ministry that unites pattern with light, reason with feeling, power with love.<br>
    Through art, man revalues his machines and spiritualizes his world.<br><br>
    Thus, the enduring task of every age is not to make mechanisms more human,<br>
    but to make humans more spiritual—<br>
    that through enlightened mind and inspired art,<br>
    the material creations of man may become the luminous instruments of God.</strong>
  </div>
</footer>

<script>
  const portraits = [
    { file:"2pac.html",color:"#ff0000",asset:"https://bazar.arweave.net/#/asset/rpeFqd9YpGla0ca97AqtDGZLmHsbLGUQJZyJhIYfqow"},
    {file:"bruce-lee.html",color:"#aa8800",asset:"https://bazar.arweave.net/#/asset/7_DyqPQcwIcZIXdWe6XNVM3s6GFTC79TRnYyVjo71uo"},
    {file:"esir.html",color:"#ff0000",asset:"https://bazar.arweave.net/#/asset/RydjHqylE783V-ARQSQqIIcy1USq-K8tnJ6QR9cOf-A"},
    {file:"marilyn-monroe.html",color:"#5c5c5c",asset:"https://bazar.arweave.net/#/asset/z-4jgyc9n7xmWVRiwmxnBp33HrEyQV8wceLPBRG_s7g"},
    {file:"princess-diana.html",color:"#de7a00",asset:"https://bazar.arweave.net/#/asset/anLL7r9JzPRSD1rg7tBiJFJzD-6j-f_HeB8Q8jAj9q0"},
    {file:"xxxtentacion.html",color:"#006fc5",asset:"https://bazar.arweave.net/#/asset/8b-TNGjQEvH5iBb-7WrfBxplolZ-2O0BeZCJ6sZz9E8"}
  ];

  let current=-1, firstLoad=true, isTransitioning=false, cacheBuster=0, lastInfo="", tickerInterval=null;

  const iframe = document.getElementById("frame");
  const infoEl = document.getElementById("info");
  const assetEl = document.getElementById("assetHref");
  const promptEl = document.querySelector(".prompt");
  const loadingEl = document.getElementById("loadingText");

  portraits.forEach(p=>{const l=document.createElement("link");l.rel="prefetch";l.href=p.file;document.head.appendChild(l);});

  const START = new Date("2025-10-16T00:00:00").getTime();
  const END   = new Date("2055-10-16T00:00:00").getTime();
  const TOTAL = END - START;

  function applyTheme(c){ document.documentElement.style.setProperty("--accent",c); }

  function formatRemaining(ms){
    const years=Math.floor(ms/(365.25*86400000));
    const days=Math.floor((ms%(365.25*86400000))/86400000);
    const hrs=Math.floor((ms%86400000)/3600000);
    const min=Math.floor((ms%3600000)/60000);
    const sec=Math.floor((ms%60000)/1000);
    const millis=String(ms%1000).padStart(3,"0");
    return years>0?`${years}y ${days}d ${hrs}:${min.toString().padStart(2,0)}:${sec.toString().padStart(2,0)}.${millis}`
                 :`${days}d ${hrs}:${min.toString().padStart(2,0)}:${sec.toString().padStart(2,0)}.${millis}`;
  }

  function updateInfo(){
    const now=Date.now();
    let text;
    if(now<END){
      const progress=((now-START)/TOTAL)*100;
      text=`${progress.toFixed(6)}% aged — ${formatRemaining(END-now)} remaining`;
    }else{
      const daysSince=Math.floor((now-END)/86400000);
      const state=daysSince%2===0?"OLD":"YOUNG";
      text=`ETERNAL CYCLE • DAY ${daysSince} • CURRENTLY ${state}`;
    }
    if(text!==lastInfo) infoEl.textContent=lastInfo=text;
  }

  function startTicker(){
    if(tickerInterval) clearInterval(tickerInterval);
    const interval=Date.now()<END?50:60000;
    updateInfo();
    tickerInterval=setInterval(updateInfo,interval);
  }

  function nextPortrait(){
    if(isTransitioning) return;
    isTransitioning=true;
    current=(current+1)%portraits.length;
    const p=portraits[current];

    if(firstLoad){
      iframe.src=p.file;
      firstLoad=false;
    }else{
      iframe.style.opacity="0";
      setTimeout(()=>{ iframe.src=p.file+"?v="+(++cacheBuster); },120);
    }
    applyTheme(p.color);
    assetEl.href=p.asset;
    startTicker();
  }

  iframe.onload=()=>{
    requestAnimationFrame(()=>{ requestAnimationFrame(()=>{
      iframe.style.opacity="1";
      loadingEl.style.display="none";
      isTransitioning=false;
    })});
  };

  const advance=e=>{ e?.preventDefault(); nextPortrait(); };
  promptEl.addEventListener("pointerdown",advance);
  document.addEventListener("keydown",e=>{
    if([" ","Enter","ArrowRight"].includes(e.key)){ e.preventDefault(); advance(); }
  });

  window.addEventListener("load",()=>{
    current=Math.floor(Math.random()*portraits.length)-1;
    nextPortrait();
  });

  (function(){
    const cfg={src:'https://analytics_arlink.ar.io/browser.js',processId:'x7-bu_KON6GQ6W1XBAK2FZavYAuC7v01iz2no8srvNA',trackUrlHashes:true,debug:false};
    const init=()=>{const s=document.createElement('script');s.type='module';s.src=cfg.src;s.dataset.processId=cfg.processId;s.dataset.trackUrlHashes=cfg.trackUrlHashes;s.dataset.debug=cfg.debug;document.body.appendChild(s);};
    if(document.readyState==='loading') document.addEventListener('DOMContentLoaded',init); else init();
  })();

  // TIMELAPSE
  const timelapseBtn = document.querySelector('.timelapse-prompt');
  const overlay = document.getElementById('timelapse-overlay');
  const player = overlay.querySelector('iframe');
  const close = document.getElementById('timelapse-close');
  const url = "https://odysee.com/$/embed/@Riotgear:5/esir:e?r=7A5js92BoquV5EUNssZTYvYM9HfwvLTK";

  timelapseBtn.addEventListener('pointerdown', e => {
    e.preventDefault();
    player.src = url;
    overlay.classList.add('visible');
  });

  close.addEventListener('pointerdown', e => {
    e.stopPropagation();
    overlay.classList.remove('visible');
    setTimeout(() => player.src = '', 600);
  });

  overlay.addEventListener('pointerdown', e => {
    if (e.target === overlay) close.dispatchEvent(new Event('pointerdown'));
  });
  
  (function() {
      // Configuration
      const ANALYTICS_CONFIG = {
        src: 'https://analytics_arlink.ar.io/browser.js',
        processId: 'LhzYJLtJeAaVbpDeHK4JlYVhuvVnx8yFaGMAYRIY248',
        trackUrlHashes: true,
        debug: false
      };

      // Wait for DOM to be ready
      function init() {
        const script = document.createElement('script');
        script.type = 'module';
        script.src = ANALYTICS_CONFIG.src;
        script.setAttribute('data-process-id', ANALYTICS_CONFIG.processId);
        script.setAttribute('data-track-url-hashes', ANALYTICS_CONFIG.trackUrlHashes);
        script.setAttribute('data-debug', ANALYTICS_CONFIG.debug);
        document.body.appendChild(script);
      }

      // Handle different loading states
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init);
      } else {
        init();
      }
    })();
</script>
</body>
</html>